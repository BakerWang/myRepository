<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.runlion.shop.dao.BspCommentMapper">
	<resultMap id="CommentVOMap" type="com.runlion.shop.vo.CommentVO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 17 
			13:50:25 CST 2015. -->
		<id column="cid" jdbcType="INTEGER" property="cid" />
		<result column="pid" jdbcType="INTEGER" property="pid" />
		<result column="uid" jdbcType="INTEGER" property="uid" />
		<result column="score" jdbcType="DOUBLE" property="score" />
		<result column="comment" jdbcType="VARCHAR" property="comment" />
		<result column="creatDate" jdbcType="TIMESTAMP" property="creatdate" />
		<result column="oid" jdbcType="INTEGER" property="oid" />
		<result column="ip" jdbcType="VARCHAR" property="ip" />
		<result column="status" jdbcType="INTEGER" property="status" />

		<result column="showimg" jdbcType="VARCHAR" property="showimg" />
		<result column="name" jdbcType="VARCHAR" property="name" />
		<result column="companyname" jdbcType="VARCHAR" property="companyname" />
	</resultMap>


	<select id="getVOList" parameterType="map" resultMap="CommentVOMap">
		select bp.showimg,bp.name,bc.*, b.name companyname
		from bsp_comment bc left outer join bsp_products bp on bc.pid=bp.pid
		left outer join bsp_orders a on bc.oid = a.oid
		left outer join bsp_saleaddress b on a.salerid = b.id
		where bc.uid=#{UID}
		limit #{PAGE_NUM},#{PAGE_SIZE}
	</select>

	<select id="countVOList" parameterType="map" resultType="java.lang.Integer">
		select
		count(*) from bsp_products bp,bsp_comment bc
		where bc.uid=#{UID} and
		bc.pid=bp.pid
	</select>

</mapper>