<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.runlion.shop.dao.CusNcenterinforMapper" >
  <resultMap id="StoreAndNcProinforMap" type="com.runlion.shop.vo.product.StoreAndNcProinfor" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 01 14:19:10 CST 2015.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    
    <result column="sid" property="sid" jdbcType="INTEGER" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="mobile" property="mobile" jdbcType="VARCHAR" />
    <result column="contacts" property="contacts" jdbcType="VARCHAR" />    
    
    <result column="eid" property="eid" jdbcType="VARCHAR" />
    <result column="ename" property="ename" jdbcType="VARCHAR" />
    <result column="pkcorp" property="pkcorp" jdbcType="VARCHAR" />
    <result column="corpname" property="corpname" jdbcType="VARCHAR" />
    <result column="pid" property="pid" jdbcType="VARCHAR" />
    <result column="pname" property="pname" jdbcType="VARCHAR" />
    <result column="price" property="price" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="INTEGER" />
    <result column="lastuptime" property="lastuptime" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <select id="selStoreAndNcProinfor" parameterType="map"
		resultMap="StoreAndNcProinforMap">
		select bn.*,bs.id as sid,bs.address,bs.mobile,bs.contacts 
		from bsp_ncenterinfor bn left join bsp_saleaddress bs on bn.eid=bs.pkcorp
		where  
		(bn.eid like CONCAT('%','${storeKeyWord}','%') or bn.ename like CONCAT('%','${storeKeyWord}','%'))
		and 
		(bn.pkcorp like CONCAT('%','${facKeyWord}','%') or bn.corpname like CONCAT('%','${facKeyWord}','%'))
		and 
		(bn.pid like CONCAT('%','${proKeyWord}','%') or bn.pname like CONCAT('%','${proKeyWord}','%'))
		and bn.state=0
		limit #{STARTROW,jdbcType=INTEGER},#{ROWNUM,jdbcType=INTEGER}	
	</select>
	
	<select id="countStoreAndNcProinfor" parameterType="map"
		resultType="int">
		select count(1)
		from bsp_ncenterinfor bn left join bsp_saleaddress bs on bn.eid=bs.pkcorp
		where  
		(bn.eid like CONCAT('%','${storeKeyWord}','%') or bn.ename like CONCAT('%','${storeKeyWord}','%'))
		and 
		(bn.pkcorp like CONCAT('%','${facKeyWord}','%') or bn.corpname like CONCAT('%','${facKeyWord}','%'))
		and 
		(bn.pid like CONCAT('%','${proKeyWord}','%') or bn.pname like CONCAT('%','${proKeyWord}','%'))
		and bn.state=0
	</select>
  
</mapper>