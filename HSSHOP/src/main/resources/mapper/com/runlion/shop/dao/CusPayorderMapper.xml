<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.runlion.shop.dao.CusPayorderMapper">
  <resultMap id="BaseResultMap" type="com.runlion.shop.vo.pay.StoremnyInforVO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 15 10:07:47 CST 2015.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="oid" jdbcType="INTEGER" property="oid" />
    <result column="uid" jdbcType="INTEGER" property="uid" />
    <result column="username" jdbcType="VARCHAR" property="username" />
    <result column="paytype" jdbcType="INTEGER" property="paytype" />
    <result column="paytypeName" jdbcType="VARCHAR" property="paytypename" />
    <result column="payamount" jdbcType="DECIMAL" property="payamount" />
    <result column="paytime" jdbcType="TIMESTAMP" property="paytime" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="osn" jdbcType="VARCHAR" property="osn" />
    <result column="createtime" jdbcType="TIMESTAMP" property="createtime" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.runlion.shop.vo.pay.StoremnyInforVO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 15 10:07:47 CST 2015.
    -->
    <result column="description" jdbcType="LONGVARCHAR" property="description" />
  </resultMap>

  
  <select id="selStoremnyVOList" parameterType="map" resultMap="ResultMapWithBLOBs">
    select bpo.*,bu.username
    from bsp_payOrder bpo,bsp_users bu
    where bpo.uid=bu.uid
    <if test="username !=null">
		and bu.username like CONCAT('%','${username}','%' )
	</if>
	<if test="status !=null and status != -1">
		and bpo.status =${status}
	</if>
	<if test="startDate !=null and startDate !=''">
		and bpo.createtime &gt; '${startDate}'
	</if>
	<if test="endDate !=null and endDate !=''">
		and bpo.createtime &lt; '${endDate}'
	</if>
	order by bpo.createtime desc
	limit ${startRow},${numPerPage}
  </select>
  
  <select id="countStoremnyVOList" parameterType="map" resultType="java.lang.Integer">
    select count(1)
    from bsp_payOrder bpo,bsp_users bu
    where bpo.uid=bu.uid
    <if test="username !=null">
		and bu.username like CONCAT('%','${username}','%' )
	</if>
	<if test="status !=null and status != -1">
		and bpo.status =${status}
	</if>
	<if test="startDate !=null and startDate !=''">
		and bpo.createtime &gt; '${startDate}'
	</if>
	<if test="endDate !=null and endDate !=''">
		and bpo.createtime &lt; '${endDate}'
	</if>
  </select>
  
</mapper>